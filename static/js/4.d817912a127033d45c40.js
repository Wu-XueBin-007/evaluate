webpackJsonp([4],{W0dA:function(t,s){},pjeT:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("Havv"),i={data:()=>({tabs:["最高分","最差分","最近评分"],loading:!1,finished:!1,list:[],check:!0,page:0,immediate:!1,tabindex:0,type:"best",isLoading:!1,Refresh:!1}),components:{},computed:{},mounted(){this.onLoad()},methods:{onLoad(){this.page++;let t={page:this.page,tag:this.type};a.a.post("reviewlist",t).then(t=>{this.loading=!1;let s=t.data.data.list;t.data.code&&s?(1==this.page?this.list=s:this.list=[...this.list,...s],0==s.length?this.finished=!0:this.finished=!1):(this.$toast.fail(t.data.data.msg?t.data.data.msg:"参数有误"),"timeout"==t.data.data&&(localStorage.removeItem("token"),this.$router.push({name:"login"}))),this.$toast.clear(),this.Refresh&&(this.$toast.success({message:"刷新成功",duration:1e3}),this.Refresh=!1),this.isLoading=!1}).catch(t=>{console.log(t),this.$toast.fail(t.msg?t.msg:"reviewlist参数有误")})},toDet(t){t?this.$router.push({name:"Detailed",params:{uid:t}}):this.$toast.fail("uid参数有误")},onClick(t){let s=this;switch(this.$toast.loading({mask:!0,message:"加载中..."}),t){case"最高分":s.type="best",s.tabindex=0;break;case"最差分":s.type="bad",s.tabindex=1;break;case"最近评分":s.type="new",s.tabindex=2;break;default:s.type="best",s.tabindex=0}this.page=0,console.log(s.type),this.finished=!1,this.onLoad()},onRefresh(){this.Refresh=!0,this.page=0,this.onLoad()}}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"app"},[e("van-pull-refresh",{staticStyle:{width:"100%"},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(s){t.isLoading=s},expression:"isLoading"}},[e("div",{staticClass:"tabs"},t._l(t.tabs,function(s,a){return e("span",{key:a,staticClass:"taitem",class:[t.tabindex==a?"action":"tabitem"],on:{click:function(e){return t.onClick(s)}}},[t._v(t._s(s))])}),0),t._v(" "),e("van-list",{staticClass:"van-list",attrs:{finished:t.finished,"immediate-check":t.immediate,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[e("div",{staticClass:"wrap"},t._l(t.list,function(s,a){return e("div",{key:a,staticClass:"listwrap",on:{click:function(e){return t.toDet(s.uid)}}},[e("span",{staticClass:"scoreNum"},[t._v(t._s(s.score))]),t._v(" "),e("div",{staticClass:"left"},[e("img",{attrs:{src:"https://head.dziqian.com/avtaurl.png",alt:""}})]),t._v(" "),e("div",{staticClass:"right"},[e("div",[t._v(t._s(s.name))]),t._v(" "),e("div",[e("van-rate",{attrs:{"allow-half":"",readonly:""},model:{value:s.score,callback:function(e){t.$set(s,"score",e)},expression:"item.score "}})],1)])])}),0)])],1)],1)},staticRenderFns:[]};var o=e("C7Lr")(i,n,!1,function(t){e("W0dA")},"data-v-1a06657d",null);s.default=o.exports}});
//# sourceMappingURL=4.d817912a127033d45c40.js.map